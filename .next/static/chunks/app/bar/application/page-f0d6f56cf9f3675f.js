(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6918],{93499:function(e,a,t){Promise.resolve().then(t.bind(t,57669))},57669:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return L}});var r=t(57437),l=t(2265),s=t(33681),n=t(95186),i=t(53647),c=t(26815),o=t(7310),d=t.n(o);function u(e){let{applications:a,onFilter:t}=e,[s,o]=(0,l.useState)(""),[u,x]=(0,l.useState)("all"),[h,m]=(0,l.useState)(""),[g,p]=(0,l.useState)(""),j=(0,l.useMemo)(()=>d()(e=>{t(e)},300),[t]);return(0,l.useEffect)(()=>{j(a.filter(e=>{var a,t,r;let l=(null===(a=e.applicantName)||void 0===a?void 0:a.toLowerCase().includes(s.toLowerCase()))||(null===(t=e.eventTitle)||void 0===t?void 0:t.toLowerCase().includes(s.toLowerCase()))||(null===(r=e.eventCategory)||void 0===r?void 0:r.toLowerCase().includes(s.toLowerCase())),n="all"===u||e.status===u,i=!h||new Date(e.date)>=new Date(h),c=!g||new Date(e.date)<=new Date(g);return l&&n&&i&&c}))},[a,s,u,h,g,j]),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-4 sm:flex-row sm:space-y-0 sm:space-x-4",children:[(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsx)(c._,{htmlFor:"search",className:"text-gray-100",children:"Arama"}),(0,r.jsx)(n.I,{id:"search",placeholder:"Başvuru No, Başvuran Kişi veya Olay Başlığı",value:s,onChange:e=>o(e.target.value),className:"bg-gray-800 text-gray-100 border-gray-700"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"status",className:"text-gray-100",children:"Durum"}),(0,r.jsxs)(i.Ph,{value:u,onValueChange:x,children:[(0,r.jsx)(i.i4,{id:"status",className:"w-[200px] bg-gray-800 text-gray-100 border-gray-700",children:(0,r.jsx)(i.ki,{placeholder:"Durum se\xe7in"})}),(0,r.jsxs)(i.Bw,{className:"bg-gray-800 text-gray-100 border-gray-700",children:[(0,r.jsx)(i.Ql,{value:"all",children:"T\xfcm\xfc"}),(0,r.jsx)(i.Ql,{value:"işlemde",children:"İşlemde"}),(0,r.jsx)(i.Ql,{value:"beklemede",children:"Beklemede"}),(0,r.jsx)(i.Ql,{value:"tamamlandı",children:"Tamamlandı"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"startDate",className:"text-gray-100",children:"Başlangı\xe7 Tarihi"}),(0,r.jsx)(n.I,{id:"startDate",type:"date",value:h,onChange:e=>m(e.target.value),className:"bg-gray-800 text-gray-100 border-gray-700"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"endDate",className:"text-gray-100",children:"Bitiş Tarihi"}),(0,r.jsx)(n.I,{id:"endDate",type:"date",value:g,onChange:e=>p(e.target.value),className:"bg-gray-800 text-gray-100 border-gray-700"})]})]})})}var x=t(73578),h=t(62869),m=t(35974),g=t(10398);function p(e){let{applications:a=[],onUpdateApplication:t,onDavaSelect:s}=e,[n,i]=(0,l.useState)(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.iA,{children:[(0,r.jsx)(x.xD,{children:(0,r.jsxs)(x.SC,{children:[(0,r.jsx)(x.ss,{className:"text-gray-300",children:"Başvuran Adı-Soyadı"}),(0,r.jsx)(x.ss,{className:"text-gray-300",children:"Telefon"}),(0,r.jsx)(x.ss,{className:"text-gray-300",children:"Başvuru Başlığı"}),(0,r.jsx)(x.ss,{className:"text-gray-300",children:"Kategori"}),(0,r.jsx)(x.ss,{className:"text-gray-300",children:"Durum"}),(0,r.jsx)(x.ss,{className:"text-gray-300",children:"Başvuru Tarihi"}),(0,r.jsx)(x.ss,{className:"text-gray-300",children:"Atanan Avukat"}),(0,r.jsx)(x.ss,{className:"text-gray-300",children:"İşlemler"})]})}),(0,r.jsx)(x.RM,{children:a.map(e=>{var a;return(0,r.jsxs)(x.SC,{className:"hover:bg-gray-800 border-gray-700 cursor-pointer",onClick:()=>s(e),children:[(0,r.jsx)(x.pj,{className:"text-gray-100",children:e.applicantName||"N/A"}),(0,r.jsx)(x.pj,{className:"text-gray-100",children:(null===(a=e.contactDetails)||void 0===a?void 0:a.phone)||"N/A"}),(0,r.jsx)(x.pj,{className:"text-gray-100",children:e.eventTitle||"N/A"}),(0,r.jsx)(x.pj,{className:"text-gray-100",children:(0,r.jsx)(m.C,{variant:"secondary",children:e.eventCategory||"N/A"})}),(0,r.jsx)(x.pj,{className:"text-gray-100",children:(0,r.jsx)(m.C,{variant:"beklemede"===e.status?"default":"success",children:e.status||"N/A"})}),(0,r.jsx)(x.pj,{className:"text-gray-100",children:e.date?new Date(e.date).toLocaleDateString("tr-TR"):"N/A"}),(0,r.jsx)(x.pj,{className:"text-gray-100",children:e.assignedLawyer||"Atanmadı"}),(0,r.jsx)(x.pj,{children:(0,r.jsx)(h.z,{variant:"outline",className:"text-yellow-500 hover:text-yellow-600",onClick:a=>{a.stopPropagation(),i(e)},children:"D\xfczenle"})})]},e._id)})})]}),n&&(0,r.jsx)(g.Z,{application:n,onClose:()=>i(null),onSubmit:e=>{t(e),i(null)}})]})}var j=t(66070),y=t(47625),v=t(75169),f=t(3574),b=t(20407),N=t(8147),w=t(22190),B=t(77031),C=t(56940),k=t(97059),D=t(62994),S=t(31699);let A=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];function E(e){let{applications:a}=e,t=Object.entries(a.reduce((e,a)=>(e[a.eventCategory]=(e[a.eventCategory]||0)+1,e),{})).map(e=>{let[a,t]=e;return{name:a,value:t}}),l=Object.entries(a.reduce((e,a)=>{let t=new Date(a.date).getMonth();return e[t]=(e[t]||0)+1,e},{})).map(e=>{let[a,t]=e;return{month:new Date(2023,Number(a)).toLocaleString("default",{month:"long"}),count:t}});return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(j.Zb,{className:"bg-gray-800 text-gray-100",children:[(0,r.jsx)(j.Ol,{children:(0,r.jsx)(j.ll,{children:"Başvuru Kategorilerine G\xf6re Dağılım"})}),(0,r.jsx)(j.aY,{children:(0,r.jsx)("div",{className:"h-[300px]",children:(0,r.jsx)(y.h,{width:"100%",height:"100%",children:(0,r.jsxs)(v.u,{children:[(0,r.jsx)(f.b,{data:t,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:e=>{let{name:a,percent:t}=e;return"".concat(a," ").concat((100*t).toFixed(0),"%")},children:t.map((e,a)=>(0,r.jsx)(b.b,{fill:A[a%A.length]},"cell-".concat(a)))}),(0,r.jsx)(N.u,{}),(0,r.jsx)(w.D,{})]})})})})]}),(0,r.jsxs)(j.Zb,{className:"bg-gray-800 text-gray-100",children:[(0,r.jsx)(j.Ol,{children:(0,r.jsx)(j.ll,{children:"Aylık Başvuru Sayıları"})}),(0,r.jsx)(j.aY,{children:(0,r.jsx)("div",{className:"h-[300px]",children:(0,r.jsx)(y.h,{width:"100%",height:"100%",children:(0,r.jsxs)(B.v,{data:l,children:[(0,r.jsx)(C.q,{strokeDasharray:"3 3"}),(0,r.jsx)(k.K,{dataKey:"month"}),(0,r.jsx)(D.B,{}),(0,r.jsx)(N.u,{}),(0,r.jsx)(w.D,{}),(0,r.jsx)(S.$,{dataKey:"count",fill:"#8884d8"})]})})})})]})]})}var T=t(12339),_=t(77992),R=t(99376),F=t(9914);function L(){let{applications:e,fetchApplications:a,addApplication:t,updateApplication:n}=(0,F.Z)(),{toast:i}=(0,_.pm)(),c=(0,R.useRouter)(),[o,d]=(0,l.useState)("list"),[x,m]=(0,l.useState)(!1),[j]=(0,l.useState)(null);(0,l.useEffect)(()=>{a().catch(()=>{i({title:"Hata",description:"Başvurular y\xfcklenirken bir hata oluştu.",variant:"destructive"})})},[a,i]);let y=async e=>{try{await t(e),m(!1),i({title:"Başvuru Eklendi",description:"Yeni başvuru başarıyla eklendi."})}catch(e){i({title:"Hata",description:"Başvuru eklenirken bir hata oluştu.",variant:"destructive"})}},v=async e=>{try{await n(e._id,e),i({title:"Başvuru G\xfcncellendi",description:"Başvuru bilgileri başarıyla g\xfcncellendi."})}catch(e){i({title:"Hata",description:"Başvuru g\xfcncellenirken bir hata oluştu.",variant:"destructive"})}};return(0,r.jsx)(s.Z,{children:(0,r.jsxs)("div",{className:"space-y-6 bg-gray-900 text-gray-100 p-6 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Başvuru Y\xf6netimi"}),(0,r.jsx)(h.z,{onClick:()=>m(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:"Yeni Başvuru Ekle"})]}),(0,r.jsx)(u,{applications:e,onFilter:e=>console.log(e)}),(0,r.jsxs)(T.mQ,{value:o,onValueChange:e=>d(e),children:[(0,r.jsxs)(T.dr,{children:[(0,r.jsx)(T.SP,{value:"list",children:"Başvuru Listesi"}),(0,r.jsx)(T.SP,{value:"statistics",children:"İstatistikler"})]}),(0,r.jsx)(T.nU,{value:"list",children:(0,r.jsx)(p,{applications:e,onUpdateApplication:v,onDavaSelect:e=>{c.push("/bar/application/".concat(e._id))}})}),(0,r.jsx)(T.nU,{value:"statistics",children:(0,r.jsx)(E,{applications:e})})]}),x&&(0,r.jsx)(g.Z,{application:j,onClose:()=>m(!1),onSubmit:y})]})})}},73578:function(e,a,t){"use strict";t.d(a,{RM:function(){return c},SC:function(){return o},iA:function(){return n},pj:function(){return u},ss:function(){return d},xD:function(){return i}});var r=t(57437),l=t(2265),s=t(94508);let n=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:a,className:(0,s.cn)("w-full caption-bottom text-sm",t),...l})})});n.displayName="Table";let i=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("thead",{ref:a,className:(0,s.cn)("[&_tr]:border-b",t),...l})});i.displayName="TableHeader";let c=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("tbody",{ref:a,className:(0,s.cn)("[&_tr:last-child]:border-0",t),...l})});c.displayName="TableBody",l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("tfoot",{ref:a,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...l})}).displayName="TableFooter";let o=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("tr",{ref:a,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...l})});o.displayName="TableRow";let d=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("th",{ref:a,className:(0,s.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...l})});d.displayName="TableHead";let u=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("td",{ref:a,className:(0,s.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...l})});u.displayName="TableCell",l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("caption",{ref:a,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",t),...l})}).displayName="TableCaption"},9914:function(e,a,t){"use strict";var r=t(3011),l=t(78735);let s=(0,r.U)(e=>({applications:[],currentApplication:null,loading:!1,error:null,fetchApplications:async a=>{e({loading:!0,error:null});try{let t=await (0,l.RV)(a);e({applications:t,loading:!1}),console.log("Storedaki veriler:",t)}catch(a){e({error:(a instanceof Error?a:Error("Bilinmeyen bir hata oluştu.")).message,loading:!1})}},addApplication:async a=>{e({loading:!0,error:null});try{let t=await (0,l.W3)(a);e(e=>({applications:[...e.applications,t],loading:!1}))}catch(a){e({error:(a instanceof Error?a:Error("Bilinmeyen bir hata oluştu.")).message,loading:!1})}},updateApplication:async(a,t)=>{e({loading:!0,error:null});try{let r=await (0,l.li)(a,t);e(e=>({applications:e.applications.map(e=>e._id===a?r:e),loading:!1}))}catch(a){e({error:(a instanceof Error?a:Error("Bilinmeyen bir hata oluştu.")).message,loading:!1})}},deleteApplication:async a=>{e({loading:!0,error:null});try{await (0,l.rw)(a),e(e=>({applications:e.applications.filter(e=>e._id!==a),loading:!1}))}catch(a){e({error:(a instanceof Error?a:Error("Bilinmeyen bir hata oluştu.")).message,loading:!1})}},loadApplicationDetails:async a=>{e({loading:!0,error:null});try{let t=await (0,l.Jv)(a);e({currentApplication:t,loading:!1})}catch(a){e({error:(a instanceof Error?a:Error("Bilinmeyen bir hata oluştu.")).message,loading:!1})}},assignLawyerToApplication:async(a,t)=>{e({loading:!0,error:null});try{let r=await (0,l.tk)(a,t);e(e=>({applications:e.applications.map(e=>e._id===a?r:e),loading:!1}))}catch(a){e({error:(a instanceof Error?a:Error("Bilinmeyen bir hata oluştu.")).message,loading:!1})}}}));a.Z=s},3011:function(e,a,t){"use strict";t.d(a,{U:function(){return c}});var r=t(2265);let l=e=>{let a;let t=new Set,r=(e,r)=>{let l="function"==typeof e?e(a):e;if(!Object.is(l,a)){let e=a;a=(null!=r?r:"object"!=typeof l||null===l)?l:Object.assign({},a,l),t.forEach(t=>t(a,e))}},l=()=>a,s={setState:r,getState:l,getInitialState:()=>n,subscribe:e=>(t.add(e),()=>t.delete(e))},n=a=e(r,l,s);return s},s=e=>e?l(e):l,n=e=>e,i=e=>{let a=s(e),t=e=>(function(e,a=n){let t=r.useSyncExternalStore(e.subscribe,()=>a(e.getState()),()=>a(e.getInitialState()));return r.useDebugValue(t),t})(a,e);return Object.assign(t,a),t},c=e=>e?i(e):i}},function(e){e.O(0,[8265,1199,7648,5878,4809,6569,9136,3464,2985,346,2430,5081,1357,2971,2117,1744],function(){return e(e.s=93499)}),_N_E=e.O()}]);